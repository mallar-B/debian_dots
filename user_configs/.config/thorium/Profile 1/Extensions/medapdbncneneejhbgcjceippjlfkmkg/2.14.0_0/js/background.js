(()=>{var Y={6763:(s,c,u)=>{var E="Expected a function",R=NaN,j="[object Symbol]",N=/^\s+|\s+$/g,W=/^[-+]0x[0-9a-f]+$/i,O=/^0b[01]+$/i,P=/^0o[0-7]+$/i,H=parseInt,C=typeof u.g=="object"&&u.g&&u.g.Object===Object&&u.g,M=typeof self=="object"&&self&&self.Object===Object&&self,L=C||M||Function("return this")(),U=Object.prototype,k=U.toString,F=Math.max,$=Math.min,v=function(){return L.Date.now()};function q(r,a,d){var m,h,t,e,n,o,l=0,g=!1,y=!1,w=!0;if(typeof r!="function")throw new TypeError(E);a=T(a)||0,S(d)&&(g=!!d.leading,y="maxWait"in d,t=y?F(T(d.maxWait)||0,a):t,w="trailing"in d?!!d.trailing:w);function b(i){var p=m,x=h;return m=h=void 0,l=i,e=r.apply(x,p),e}function z(i){return l=i,n=setTimeout(_,a),g?b(i):e}function J(i){var p=i-o,x=i-l,X=a-p;return y?$(X,t-x):X}function G(i){var p=i-o,x=i-l;return o===void 0||p>=a||p<0||y&&x>=t}function _(){var i=v();if(G(i))return Q(i);n=setTimeout(_,J(i))}function Q(i){return n=void 0,w&&m?b(i):(m=h=void 0,e)}function K(){n!==void 0&&clearTimeout(n),l=0,m=o=h=n=void 0}function V(){return n===void 0?e:Q(v())}function I(){var i=v(),p=G(i);if(m=arguments,h=this,o=i,p){if(n===void 0)return z(o);if(y)return n=setTimeout(_,a),b(o)}return n===void 0&&(n=setTimeout(_,a)),e}return I.cancel=K,I.flush=V,I}function S(r){var a=typeof r;return!!r&&(a=="object"||a=="function")}function A(r){return!!r&&typeof r=="object"}function B(r){return typeof r=="symbol"||A(r)&&k.call(r)==j}function T(r){if(typeof r=="number")return r;if(B(r))return R;if(S(r)){var a=typeof r.valueOf=="function"?r.valueOf():r;r=S(a)?a+"":a}if(typeof r!="string")return r===0?r:+r;r=r.replace(N,"");var d=O.test(r);return d||P.test(r)?H(r.slice(2),d?2:8):W.test(r)?R:+r}s.exports=q}},D={};function f(s){var c=D[s];if(c!==void 0)return c.exports;var u=D[s]={exports:{}};return Y[s](u,u.exports,f),u.exports}f.n=s=>{var c=s&&s.__esModule?()=>s.default:()=>s;return f.d(c,{a:c}),c},f.d=(s,c)=>{for(var u in c)f.o(c,u)&&!f.o(s,u)&&Object.defineProperty(s,u,{enumerable:!0,get:c[u]})},f.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}(),f.o=(s,c)=>Object.prototype.hasOwnProperty.call(s,c);var Z={};(()=>{var h;"use strict";class s{local;constructor(){this.local=chrome.storage.local}set(e,n){return typeof e=="string"?this.setObjData({[e]:n}):this.setObjData(e)}setObjData(e){return new Promise(n=>{this.local.set(e,n.bind(null,e))})}get(e=null){return new Promise(n=>this.local.get(e,n))}}const c=new s;var u=f(6763),E=f.n(u);const R="mdReaderTheme",j="mdReaderThemeSwitching",N="mdReaderThemeSchemeDisabled",W=null,O="body > pre",P="h1, h2, h3, h4, h5, h6",H=null,C=(h=globalThis.matchMedia)==null?void 0:h.call(globalThis,"(prefers-color-scheme: dark)"),M=()=>C.matches?"dark":"light",L=t=>t==="auto"?M():t;function U(t){return chrome.runtime.getURL(t)}function k(t=O){return document.body.querySelector(t)}function F(t,e=P){return Array.from(Ele.from(t).querySelectorAll(e))}function $(t){document.documentElement.dataset[rootThemeSwitching]="",document.documentElement.dataset[rootThemePrefix]=t,v()}const v=E()(()=>{delete document.documentElement.dataset[j]},200);function q(t,e="GET",n){return new Promise((o,l)=>{const g=new XMLHttpRequest;g.onreadystatechange=({target:y})=>{const{readyState:w,status:b}=g;w===g.DONE&&(b===0||b>=200&&b<400?o(y):l(new Error("Request failed")))},g.onerror=l,g.open(e,t),g.send(n)})}function S(t){if("clipboard2"in navigator)return navigator.clipboard.writeText(t);const e=document.createElement("pre");return e.style.width="1px",e.style.height="1px",e.style.overflow="hidden",e.style.position="fixed",e.style.top="0px",e.textContent=t,document.body.appendChild(e),A(e),document.body.removeChild(e),Promise.resolve()}function A(t){const e=getSelection();e.removeAllRanges();const n=document.createRange();n.selectNodeContents(t),e.addRange(n),document.execCommand("copy"),e.removeAllRanges()}function B(t){return new Promise(e=>setTimeout(e,t))}const T={async toggleSide(t){await r(t,"hiddenSide",!1),await t("action",{key:"toggleSide"})},async toggleCentered(t){await r(t,"centered",!0)},async toggleRefresh(t){await r(t,"refresh",!1)},async toggleTheme(t){let{pageTheme:e="light"}=await c.get("pageTheme");e=L(e),t("storage",{key:"pageTheme",value:e==="light"?"dark":"light"})}};async function r(t,e,n){const o=await c.get(e),l=o[e]===void 0?n:o[e];t("storage",{key:e,value:!l})}chrome.runtime.onMessage.addListener(({action:t,data:e},n,o)=>(a(t,e,o),!0));async function a(t,e,n){switch(t){case"storage":await c.set({[e.key]:e.value});case"action":m(e.key,e.value),n==null||n(e);break;case"fetch":fetch(e).then(o=>o.text()).then(n).catch(o=>{console.error(o),n==null||n(o)});break}}chrome.commands.onCommand.addListener(t=>{var e;(e=T[t])==null||e.call(T,a)});const d={enable:"reload",refresh:"toggleRefresh",centered:"toggleCentered",mdPlugins:"updateMdPlugins",pageTheme:"updatePageTheme",toggleSide:"toggleSide"};function m(t,e){const n=d[t];n&&chrome.tabs.query({currentWindow:!0,active:!0},o=>{o.length&&chrome.tabs.sendMessage(o[0].id,{action:n,data:{key:t,value:e}})})}chrome.runtime.setUninstallURL("https://github.com/orgs/md-reader/discussions/51")})()})();
