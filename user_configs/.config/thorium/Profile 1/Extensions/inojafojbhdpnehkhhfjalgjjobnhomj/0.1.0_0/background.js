/*! For license information please see background.js.LICENSE.txt */
(()=>{"use strict";var e={62:(e,t,n)=>{n.r(t),n.d(t,{AlreadyExistsErrorNameEnum:()=>ne,AlreadyExistsFromJSON:()=>oe,AlreadyExistsFromJSONTyped:()=>ie,AlreadyExistsToJSON:()=>se,BASE_PATH:()=>o,BadRequestErrorNameEnum:()=>ae,BadRequestFromJSON:()=>ue,BadRequestFromJSONTyped:()=>le,BadRequestToJSON:()=>de,BaseAPI:()=>a,BlobApiResponse:()=>w,COLLECTION_FORMATS:()=>m,Configuration:()=>i,DefaultConfig:()=>s,DomainsApi:()=>x,FetchError:()=>l,ForbiddenErrorNameEnum:()=>me,ForbiddenFromJSON:()=>fe,ForbiddenFromJSONTyped:()=>ge,ForbiddenToJSON:()=>pe,GoneErrorNameEnum:()=>ve,GoneFromJSON:()=>ye,GoneFromJSONTyped:()=>we,GoneToJSON:()=>Me,JSONApiResponse:()=>b,MailboxApi:()=>q,MailboxFromJSON:()=>O,MailboxFromJSONTyped:()=>I,MailboxToJSON:()=>T,MessageAttachmentsInnerFromJSON:()=>L,MessageAttachmentsInnerFromJSONTyped:()=>U,MessageAttachmentsInnerToJSON:()=>B,MessageFromJSON:()=>z,MessageFromJSONTyped:()=>D,MessageToJSON:()=>G,MessagesApi:()=>te,MessagesFromJSON:()=>K,MessagesFromJSONTyped:()=>Q,MessagesMessagesInnerFromJSON:()=>H,MessagesMessagesInnerFromJSONTyped:()=>V,MessagesMessagesInnerToJSON:()=>W,MessagesToJSON:()=>Z,NewCustomMailboxFromJSON:()=>E,NewCustomMailboxFromJSONTyped:()=>_,NewCustomMailboxToJSON:()=>R,NewMailboxFromJSON:()=>P,NewMailboxFromJSONTyped:()=>j,NewMailboxToJSON:()=>k,NotFoundErrorNameEnum:()=>Ne,NotFoundFromJSON:()=>Ae,NotFoundFromJSONTyped:()=>Oe,NotFoundToJSON:()=>Ie,RequiredError:()=>d,Response200FromJSON:()=>Se,Response200FromJSONTyped:()=>Ee,Response200ToJSON:()=>_e,ResponseError:()=>u,ServiceUnavailableErrorNameEnum:()=>Re,ServiceUnavailableFromJSON:()=>Pe,ServiceUnavailableFromJSONTyped:()=>je,ServiceUnavailableToJSON:()=>ke,TextApiResponse:()=>M,UnauthorizedErrorNameEnum:()=>Fe,UnauthorizedFromJSON:()=>Je,UnauthorizedFromJSONTyped:()=>Le,UnauthorizedToJSON:()=>Ue,VoidApiResponse:()=>y,canConsumeForm:()=>v,exists:()=>h,instanceOfAlreadyExists:()=>re,instanceOfBadRequest:()=>ce,instanceOfForbidden:()=>he,instanceOfGone:()=>be,instanceOfMailbox:()=>A,instanceOfMessage:()=>$,instanceOfMessageAttachmentsInner:()=>J,instanceOfMessages:()=>X,instanceOfMessagesMessagesInner:()=>Y,instanceOfNewCustomMailbox:()=>S,instanceOfNewMailbox:()=>C,instanceOfNotFound:()=>xe,instanceOfResponse200:()=>Te,instanceOfServiceUnavailable:()=>Ce,instanceOfUnauthorized:()=>qe,mapValues:()=>p,querystring:()=>f});var r=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))};const o="https://web2.temp-mail.org/api/v1".replace(/\/+$/,"");class i{constructor(e={}){this.configuration=e}set config(e){this.configuration=e}get basePath(){return null!=this.configuration.basePath?this.configuration.basePath:o}get fetchApi(){return this.configuration.fetchApi}get middleware(){return this.configuration.middleware||[]}get queryParamsStringify(){return this.configuration.queryParamsStringify||f}get username(){return this.configuration.username}get password(){return this.configuration.password}get apiKey(){const e=this.configuration.apiKey;if(e)return"function"==typeof e?e:()=>e}get accessToken(){const e=this.configuration.accessToken;if(e)return"function"==typeof e?e:()=>r(this,void 0,void 0,(function*(){return e}))}get headers(){return this.configuration.headers}get credentials(){return this.configuration.credentials}}const s=new i;class a{constructor(e=s){this.configuration=e,this.fetchApi=(e,t)=>r(this,void 0,void 0,(function*(){let n,r={url:e,init:t};for(const e of this.middleware)e.pre&&(r=(yield e.pre(Object.assign({fetch:this.fetchApi},r)))||r);try{n=yield(this.configuration.fetchApi||fetch)(r.url,r.init)}catch(e){for(const t of this.middleware)t.onError&&(n=(yield t.onError({fetch:this.fetchApi,url:r.url,init:r.init,error:e,response:n?n.clone():void 0}))||n);if(void 0===n)throw e instanceof Error?new l(e,"The request failed and the interceptors did not return an alternative response"):e}for(const e of this.middleware)e.post&&(n=(yield e.post({fetch:this.fetchApi,url:r.url,init:r.init,response:n.clone()}))||n);return n})),this.middleware=e.middleware}withMiddleware(...e){const t=this.clone();return t.middleware=t.middleware.concat(...e),t}withPreMiddleware(...e){const t=e.map((e=>({pre:e})));return this.withMiddleware(...t)}withPostMiddleware(...e){const t=e.map((e=>({post:e})));return this.withMiddleware(...t)}request(e,t){return r(this,void 0,void 0,(function*(){const{url:n,init:r}=yield this.createFetchParams(e,t),o=yield this.fetchApi(n,r);if(o&&o.status>=200&&o.status<300)return o;throw new u(o,"Response returned an error code")}))}createFetchParams(e,t){return r(this,void 0,void 0,(function*(){let n=this.configuration.basePath+e.path;void 0!==e.query&&0!==Object.keys(e.query).length&&(n+="?"+this.configuration.queryParamsStringify(e.query));const o=Object.assign({},this.configuration.headers,e.headers);Object.keys(o).forEach((e=>void 0===o[e]?delete o[e]:{}));const i="function"==typeof t?t:()=>r(this,void 0,void 0,(function*(){return t})),s={method:e.method,headers:o,body:e.body,credentials:this.configuration.credentials},a=Object.assign(Object.assign({},s),yield i({init:s,context:e}));var u;return{url:n,init:Object.assign(Object.assign({},a),{body:(u=a.body,"undefined"!=typeof FormData&&u instanceof FormData||a.body instanceof URLSearchParams||c(a.body)?a.body:JSON.stringify(a.body))})}}))}clone(){const e=new(0,this.constructor)(this.configuration);return e.middleware=this.middleware.slice(),e}}function c(e){return"undefined"!=typeof Blob&&e instanceof Blob}class u extends Error{constructor(e,t){super(t),this.response=e,this.name="ResponseError"}}class l extends Error{constructor(e,t){super(t),this.cause=e,this.name="FetchError"}}class d extends Error{constructor(e,t){super(t),this.field=e,this.name="RequiredError"}}const m={csv:",",ssv:" ",tsv:"\t",pipes:"|"};function h(e,t){return null!=e[t]}function f(e,t=""){return Object.keys(e).map((n=>g(n,e[n],t))).filter((e=>e.length>0)).join("&")}function g(e,t,n=""){const r=n+(n.length?`[${e}]`:e);if(t instanceof Array){const e=t.map((e=>encodeURIComponent(String(e)))).join(`&${encodeURIComponent(r)}=`);return`${encodeURIComponent(r)}=${e}`}return t instanceof Set?g(e,Array.from(t),n):t instanceof Date?`${encodeURIComponent(r)}=${encodeURIComponent(t.toISOString())}`:t instanceof Object?f(t,r):`${encodeURIComponent(r)}=${encodeURIComponent(String(t))}`}function p(e,t){return Object.keys(e).reduce(((n,r)=>Object.assign(Object.assign({},n),{[r]:t(e[r])})),{})}function v(e){for(const t of e)if("multipart/form-data"===t.contentType)return!0;return!1}class b{constructor(e,t=(e=>e)){this.raw=e,this.transformer=t}value(){return r(this,void 0,void 0,(function*(){return this.transformer(yield this.raw.json())}))}}class y{constructor(e){this.raw=e}value(){return r(this,void 0,void 0,(function*(){}))}}class w{constructor(e){this.raw=e}value(){return r(this,void 0,void 0,(function*(){return yield this.raw.blob()}))}}class M{constructor(e){this.raw=e}value(){return r(this,void 0,void 0,(function*(){return yield this.raw.text()}))}}var N=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))};class x extends a{getDomainsRaw(e,t){return N(this,void 0,void 0,(function*(){if(null===e.secret||void 0===e.secret)throw new d("secret","Required parameter requestParameters.secret was null or undefined when calling getDomains.");const n={};void 0!==e.secret&&(n.secret=e.secret);const r={};if(this.configuration&&this.configuration.accessToken){const e=this.configuration.accessToken,t=yield e("jwtAuth",[]);t&&(r.Authorization=`Bearer ${t}`)}const o=yield this.request({path:"/domains/",method:"GET",headers:r,query:n},t);return new b(o)}))}getDomains(e,t){return N(this,void 0,void 0,(function*(){const n=yield this.getDomainsRaw(e,t);return yield n.value()}))}}function A(e){return!0}function O(e){return I(e)}function I(e,t){return null==e?e:{mailbox:h(e,"mailbox")?e.mailbox:void 0}}function T(e){if(void 0!==e)return null===e?null:{mailbox:e.mailbox}}function S(e){return!0}function E(e){return _(e)}function _(e,t){return null==e?e:{secret:h(e,"secret")?e.secret:void 0,domain:h(e,"domain")?e.domain:void 0}}function R(e){if(void 0!==e)return null===e?null:{secret:e.secret,domain:e.domain}}function C(e){return!0}function P(e){return j(e)}function j(e,t){return null==e?e:{token:h(e,"token")?e.token:void 0,mailbox:h(e,"mailbox")?e.mailbox:void 0}}function k(e){if(void 0!==e)return null===e?null:{token:e.token,mailbox:e.mailbox}}var F=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))};class q extends a{getMailboxRaw(e){return F(this,void 0,void 0,(function*(){const t={};if(this.configuration&&this.configuration.accessToken){const e=this.configuration.accessToken,n=yield e("jwtAuth",[]);n&&(t.Authorization=`Bearer ${n}`)}const n=yield this.request({path:"/mailbox",method:"GET",headers:t,query:{}},e);return new b(n,(e=>O(e)))}))}getMailbox(e){return F(this,void 0,void 0,(function*(){const t=yield this.getMailboxRaw(e);return yield t.value()}))}newMailboxRaw(e,t){return F(this,void 0,void 0,(function*(){const n={"Content-Type":"application/json"};if(this.configuration&&this.configuration.accessToken){const e=this.configuration.accessToken,t=yield e("jwtAuth",[]);t&&(n.Authorization=`Bearer ${t}`)}const r=yield this.request({path:"/mailbox",method:"POST",headers:n,query:{},body:R(e.newCustomMailbox)},t);return new b(r,(e=>P(e)))}))}newMailbox(e={},t){return F(this,void 0,void 0,(function*(){const n=yield this.newMailboxRaw(e,t);return yield n.value()}))}}function J(e){return!0}function L(e){return U(e)}function U(e,t){return null==e?e:{id:h(e,"_id")?e._id:void 0,filename:h(e,"filename")?e.filename:void 0,size:h(e,"size")?e.size:void 0,mimetype:h(e,"mimetype")?e.mimetype:void 0,cid:h(e,"cid")?e.cid:void 0}}function B(e){if(void 0!==e)return null===e?null:{_id:e.id,filename:e.filename,size:e.size,mimetype:e.mimetype,cid:e.cid}}function $(e){return!0}function z(e){return D(e)}function D(e,t){return null==e?e:{id:h(e,"_id")?e._id:void 0,receivedAt:h(e,"receivedAt")?e.receivedAt:void 0,from:h(e,"from")?e.from:void 0,subject:h(e,"subject")?e.subject:void 0,bodyHtml:h(e,"bodyHtml")?e.bodyHtml:void 0,attachmentsCount:h(e,"attachmentsCount")?e.attachmentsCount:void 0,attachments:h(e,"attachments")?e.attachments.map(L):void 0}}function G(e){if(void 0!==e)return null===e?null:{_id:e.id,receivedAt:e.receivedAt,from:e.from,subject:e.subject,bodyHtml:e.bodyHtml,attachmentsCount:e.attachmentsCount,attachments:void 0===e.attachments?void 0:e.attachments.map(B)}}function Y(e){return!0}function H(e){return V(e)}function V(e,t){return null==e?e:{id:h(e,"_id")?e._id:void 0,receivedAt:h(e,"receivedAt")?e.receivedAt:void 0,from:h(e,"from")?e.from:void 0,subject:h(e,"subject")?e.subject:void 0,bodyPreview:h(e,"bodyPreview")?e.bodyPreview:void 0,attachmentsCount:h(e,"attachmentsCount")?e.attachmentsCount:void 0}}function W(e){if(void 0!==e)return null===e?null:{_id:e.id,receivedAt:e.receivedAt,from:e.from,subject:e.subject,bodyPreview:e.bodyPreview,attachmentsCount:e.attachmentsCount}}function X(e){return!0}function K(e){return Q(e)}function Q(e,t){return null==e?e:{mailbox:h(e,"mailbox")?e.mailbox:void 0,messageCount:h(e,"messageCount")?e.messageCount:void 0,messages:h(e,"messages")?e.messages.map(H):void 0}}function Z(e){if(void 0!==e)return null===e?null:{mailbox:e.mailbox,messageCount:e.messageCount,messages:void 0===e.messages?void 0:e.messages.map(W)}}var ee=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))};class te extends a{deleteMessageRaw(e,t){return ee(this,void 0,void 0,(function*(){if(null===e.messageId||void 0===e.messageId)throw new d("messageId","Required parameter requestParameters.messageId was null or undefined when calling deleteMessage.");const n={};if(this.configuration&&this.configuration.accessToken){const e=this.configuration.accessToken,t=yield e("jwtAuth",[]);t&&(n.Authorization=`Bearer ${t}`)}const r=yield this.request({path:"/messages/{messageId}".replace("{messageId}",encodeURIComponent(String(e.messageId))),method:"DELETE",headers:n,query:{}},t);return new y(r)}))}deleteMessage(e,t){return ee(this,void 0,void 0,(function*(){yield this.deleteMessageRaw(e,t)}))}getAttachmentRaw(e,t){return ee(this,void 0,void 0,(function*(){if(null===e.messageId||void 0===e.messageId)throw new d("messageId","Required parameter requestParameters.messageId was null or undefined when calling getAttachment.");if(null===e.attachmentId||void 0===e.attachmentId)throw new d("attachmentId","Required parameter requestParameters.attachmentId was null or undefined when calling getAttachment.");const n={};if(this.configuration&&this.configuration.accessToken){const e=this.configuration.accessToken,t=yield e("jwtAuth",[]);t&&(n.Authorization=`Bearer ${t}`)}const r=yield this.request({path:"/messages/{messageId}/attachment/{attachmentId}".replace("{messageId}",encodeURIComponent(String(e.messageId))).replace("{attachmentId}",encodeURIComponent(String(e.attachmentId))),method:"GET",headers:n,query:{}},t);return new w(r)}))}getAttachment(e,t){return ee(this,void 0,void 0,(function*(){const n=yield this.getAttachmentRaw(e,t);return yield n.value()}))}getMessageRaw(e,t){return ee(this,void 0,void 0,(function*(){if(null===e.messageId||void 0===e.messageId)throw new d("messageId","Required parameter requestParameters.messageId was null or undefined when calling getMessage.");const n={};if(this.configuration&&this.configuration.accessToken){const e=this.configuration.accessToken,t=yield e("jwtAuth",[]);t&&(n.Authorization=`Bearer ${t}`)}const r=yield this.request({path:"/messages/{messageId}".replace("{messageId}",encodeURIComponent(String(e.messageId))),method:"GET",headers:n,query:{}},t);return new b(r,(e=>z(e)))}))}getMessage(e,t){return ee(this,void 0,void 0,(function*(){const n=yield this.getMessageRaw(e,t);return yield n.value()}))}getMessagesRaw(e,t){return ee(this,void 0,void 0,(function*(){const n={};void 0!==e.after&&(n.after=e.after);const r={};if(this.configuration&&this.configuration.accessToken){const e=this.configuration.accessToken,t=yield e("jwtAuth",[]);t&&(r.Authorization=`Bearer ${t}`)}const o=yield this.request({path:"/messages",method:"GET",headers:r,query:n},t);return new b(o,(e=>K(e)))}))}getMessages(e={},t){return ee(this,void 0,void 0,(function*(){const n=yield this.getMessagesRaw(e,t);return yield n.value()}))}getSourceRaw(e,t){return ee(this,void 0,void 0,(function*(){if(null===e.messageId||void 0===e.messageId)throw new d("messageId","Required parameter requestParameters.messageId was null or undefined when calling getSource.");const n={};if(this.configuration&&this.configuration.accessToken){const e=this.configuration.accessToken,t=yield e("jwtAuth",[]);t&&(n.Authorization=`Bearer ${t}`)}const r=yield this.request({path:"/messages/{messageId}/source".replace("{messageId}",encodeURIComponent(String(e.messageId))),method:"GET",headers:n,query:{}},t);return new w(r)}))}getSource(e,t){return ee(this,void 0,void 0,(function*(){const n=yield this.getSourceRaw(e,t);return yield n.value()}))}}const ne={ResourceExistsException:"ResourceExistsException"};function re(e){let t=!0;return t=t&&"errorMessage"in e,t=t&&"errorName"in e,t}function oe(e){return ie(e)}function ie(e,t){return null==e?e:{errorMessage:e.errorMessage,errorName:e.errorName}}function se(e){if(void 0!==e)return null===e?null:{errorMessage:e.errorMessage,errorName:e.errorName}}const ae={InvalidRequestParamsException:"InvalidRequestParamsException"};function ce(e){let t=!0;return t=t&&"errorMessage"in e,t=t&&"errorName"in e,t}function ue(e){return le(e)}function le(e,t){return null==e?e:{errorMessage:e.errorMessage,errorName:e.errorName}}function de(e){if(void 0!==e)return null===e?null:{errorMessage:e.errorMessage,errorName:e.errorName}}const me={AccessDeniedException:"AccessDeniedException"};function he(e){let t=!0;return t=t&&"errorMessage"in e,t=t&&"errorName"in e,t}function fe(e){return ge(e)}function ge(e,t){return null==e?e:{errorMessage:e.errorMessage,errorName:e.errorName}}function pe(e){if(void 0!==e)return null===e?null:{errorMessage:e.errorMessage,errorName:e.errorName}}const ve={GoneException:"GoneException"};function be(e){let t=!0;return t=t&&"errorMessage"in e,t=t&&"errorName"in e,t}function ye(e){return we(e)}function we(e,t){return null==e?e:{errorMessage:e.errorMessage,errorName:e.errorName}}function Me(e){if(void 0!==e)return null===e?null:{errorMessage:e.errorMessage,errorName:e.errorName}}const Ne={ResourceNotFoundException:"ResourceNotFoundException"};function xe(e){let t=!0;return t=t&&"errorMessage"in e,t=t&&"errorName"in e,t}function Ae(e){return Oe(e)}function Oe(e,t){return null==e?e:{errorMessage:e.errorMessage,errorName:e.errorName}}function Ie(e){if(void 0!==e)return null===e?null:{errorMessage:e.errorMessage,errorName:e.errorName}}function Te(e){return!0}function Se(e){return Ee(e)}function Ee(e,t){return null==e?e:{result:h(e,"result")?e.result:void 0}}function _e(e){if(void 0!==e)return null===e?null:{result:e.result}}const Re={MaintenanceException:"MaintenanceException"};function Ce(e){let t=!0;return t=t&&"errorMessage"in e,t=t&&"errorName"in e,t}function Pe(e){return je(e)}function je(e,t){return null==e?e:{errorMessage:e.errorMessage,errorName:e.errorName}}function ke(e){if(void 0!==e)return null===e?null:{errorMessage:e.errorMessage,errorName:e.errorName}}const Fe={UnauthorizedException:"UnauthorizedException"};function qe(e){let t=!0;return t=t&&"errorMessage"in e,t=t&&"errorName"in e,t}function Je(e){return Le(e)}function Le(e,t){return null==e?e:{errorMessage:e.errorMessage,errorName:e.errorName}}function Ue(e){if(void 0!==e)return null===e?null:{errorMessage:e.errorMessage,errorName:e.errorName}}},575:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default={BROWSER:"chrome",API_SYNC_INTERVAL:parseInt("10000",10)||1e4,API_SYNC_DELAY:parseInt("600000",10)||6e5,API_SYNC_SLOW_INTERVAL:parseInt("600000",10)||6e5,DEFAULT_HOME_PAGE:"https://temp-mail.org/",SITE:"https://temp-mail.org/",ENDPOINT:"https://ext2.temp-mail.org",UTM_INBOX:"utm_source=inboxbutton&utm_medium=extensions&utm_campaign=extensions",UTM_QR:"utm_source=qrcode&utm_medium=extensions&utm_campaign=extensions",URL_INSTALL:"https://apps.temp-mail.org?utm_campaign=tm2mobile&utm_source=chrome&utm_medium=extention_install",URL_UNINSTALL:"https://apps.temp-mail.org?utm_campaign=tm2mobile&utm_source=chrome&utm_medium=extention_uninstall",STORE_HOMEPAGE_URL:{chrome:"https://chrome.google.com/webstore/detail/inojafojbhdpnehkhhfjalgjjobnhomj",opera:"https://addons.opera.com/extensions/details/temp-mail-disposable-temporary-email",firefox:"https://addons.mozilla.org/firefox/addon/temp-mail"},locales:{en:"en",en_GB:"en","en-GB":"en",en_US:"en","en-US":"en",es:"es",es_419:"es",nl:"nl",de:"de",fr:"fr",it:"it",pl:"pl",pt_PT:"pt","pt-PT":"pt",pt_BR:"pt","pt-BR":"pt",ru:"ru",sr:"sr",tr:"tr",uk:"uk",ar:"ar"}}},42:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Api=void 0;const r=n(575),o=chrome.i18n.getMessage,i=n(62);t.Api=class{configurationObj={basePath:r.default.ENDPOINT,accessToken:""};mailboxApi;messagesApi;getAccessToken(){return new Promise((e=>{chrome.storage.local.get("token",(t=>{const n=t.token||"";e(n)}))}))}getMailboxApiInst(e=""){if(!this.mailboxApi||e!==this.configurationObj.accessToken){this.configurationObj.accessToken=e;const t=new i.Configuration(this.configurationObj);this.mailboxApi=new i.MailboxApi(t)}}getMessagesApiInst(e=""){if(!this.messagesApi||e!==this.configurationObj.accessToken){this.configurationObj.accessToken=e;const t=new i.Configuration(this.configurationObj);this.messagesApi=new i.MessagesApi(t)}}getCurrentMailbox(){return new Promise((e=>{this.getAccessToken().then((t=>{this.getMailboxApiInst(t),t?this.mailboxApi.getMailbox().then((t=>{e(t.mailbox)})).catch((()=>{this.generateMailbox().then((t=>{e(t)}))})):this.generateMailbox().then((t=>{e(t)}))}))}))}generateMailbox(){return new Promise((e=>{this.getAccessToken().then((t=>{this.getMailboxApiInst(t),this.mailboxApi.newMailbox().then((t=>{chrome.storage.local.set({token:t.token}),e(t.mailbox)})).catch((t=>{t.response&&429===t.response.status&&this.openReadMailTab(!0),e("")}))}))}))}getMailsList(){return new Promise((e=>{this.getAccessToken().then((t=>{this.getMessagesApiInst(t),t?this.messagesApi.getMessages().then((t=>{e(t.messages)})).catch((()=>{e([])})):e([])}))}))}openReadMailTab(e=!1){this.getAccessToken().then((t=>{const n=o("@@ui_locale"),i=e?"&too-many-mailboxes-created":"";n in r.default.locales?chrome.tabs.create({url:`${r.default.SITE}${r.default.locales[n]}/?token=${t}&${r.default.UTM_INBOX}${i}`}):chrome.tabs.create({url:`${r.default.SITE}?token=${t}&${r.default.UTM_INBOX}${i}`}),"firefox"===r.default.BROWSER&&window.close()}))}}},478:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Statistics=void 0;class n{onInstall(e){chrome.runtime.onInstalled.addListener((t=>{"install"===t.reason&&chrome.tabs.create({url:e})}))}onUninstall(e){chrome.runtime.setUninstallURL(e)}}t.Statistics=n,t.default=new n}},t={};function n(r){var o=t[r];if(void 0!==o)return o.exports;var i=t[r]={exports:{}};return e[r](i,i.exports,n),i.exports}n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{const e=n(42),t=n(575),r=n(478),o=new e.Api,i=chrome.i18n.getMessage;let s=!0;chrome.notifications.onClicked.addListener((e=>{o.openReadMailTab(),chrome.notifications.clear(e)}));const a=function(){s=!1},c=t.default.API_SYNC_INTERVAL/6e4;chrome.alarms.create({periodInMinutes:c}),chrome.alarms.onAlarm.addListener((()=>{(()=>{const e=.9*(s?t.default.API_SYNC_INTERVAL:t.default.API_SYNC_SLOW_INTERVAL);chrome.storage.local.get("last_checked",(t=>{(!t.last_checked||Date.now()-t.last_checked>e)&&(chrome.storage.local.set({last_checked:Date.now()}),chrome.storage.local.get(["msgCount"],(e=>{o.getMailsList().then((t=>{chrome.action.setBadgeBackgroundColor({color:[255,0,0,255]}),chrome.action.setBadgeText({text:t.length?t.length.toString():""}),parseInt(e.msgCount,10)!==t.length&&chrome.storage.local.set({msgCount:t.length?t.length:0}),parseInt(e.msgCount,10)<t.length&&chrome.notifications.create("tempMailExtensionId",{type:"basic",iconUrl:"img/128x128.png",title:i("new_mail_notification_header"),message:`${t.length} ${i("new_mail_notification_body")}`})}))})))}))})(),chrome.alarms.create({periodInMinutes:c})}));const u=function(){setTimeout(a,t.default.API_SYNC_DELAY)};function l(){chrome.storage.local.get("autofillEnabled",(e=>{let t=0!==e.autofillEnabled;chrome.tabs.query({active:!0,lastFocusedWindow:!0},(e=>{if(chrome.runtime.lastError)setTimeout((()=>{l()}),500);else{const n=new RegExp("^(http|https)://","i");if(e&&e[0]&&e[0].url&&n.test(e[0].url)){const n=new URL(e[0].url).hostname;t?chrome.storage.local.get("autofillExceptionsList",(r=>{const o=r.autofillExceptionsList?r.autofillExceptionsList:{};t=!o.hasOwnProperty(n),chrome.tabs.sendMessage(e[0].id,{action:"autofillEnabled",autofill:t},(function(){chrome.runtime.lastError}))})):chrome.tabs.sendMessage(e[0].id,{action:"autofillEnabled",autofill:t},(function(){chrome.runtime.lastError}))}}}))}))}chrome.storage.onChanged.addListener((e=>{"last_opened"in e&&(s=!0),"ping"in e&&setTimeout(u,3e3)})),chrome.tabs.onCreated.addListener((()=>{l()})),chrome.tabs.onUpdated.addListener((()=>{l()})),chrome.tabs.onActivated.addListener((()=>{l()})),chrome.storage.onChanged.addListener((e=>{("autofillEnabled"in e||"autofillExceptionsList"in e)&&l()})),chrome.runtime.onMessage.addListener((function(e){"getTempEmail"===e.action&&chrome.tabs.query({active:!0,currentWindow:!0},(function(t){const n=t[0];n&&o.getCurrentMailbox().then((t=>{chrome.tabs.sendMessage(n.id,{email:t,inputDataId:e.inputDataId},(function(){chrome.runtime.lastError}))}))}))})),chrome.contextMenus.onClicked.addListener((function(e,t){"context_menu_insert_email"===e.menuItemId&&o.getCurrentMailbox().then((e=>{chrome.tabs.sendMessage(t.id,{email:e,contextMenu:!0},(function(){chrome.runtime.lastError}))}))})),chrome.runtime.onInstalled.addListener((()=>{const e=i("paste_tm_address");chrome.contextMenus.create({id:"context_menu_insert_email",title:e,contexts:["editable"]})})),r.default.onInstall(t.default.URL_INSTALL),r.default.onUninstall(t.default.URL_UNINSTALL)})()})();